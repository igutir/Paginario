{% extends "base.html" %}

{% block contenido %}

<script>
function eliminarLibro(id){

    Swal.fire({
        "title": "Advertencia",
        "text": "¿Estás seguro que deseas eliminar este libro?",
        "icon": "warning",
        "showCancelButton": true,
        "cancelButtonText": "No, cancelar",
        "confirmButtonText": "Si, eliminar"
    }).then((result) => {
        if(result.isConfirmed){
            Swal.fire("Libro eliminado!", "", "success");
            window.location.href = "d/" + id + "/";
        }
    })
}
</script>

<div class="d-flex justify-content-center m-4 ps-4" style="color: rgb(24, 36, 100);" >
    <h1>
        Libros registrados
    </h1>
</div>

<div class="d-flex justify-content-center mx-auto" style="max-width: 1000px;">
    <table class="table table-striped">
        <thead>
            <tr>
                <th scope="col">Id</th>
                <th scope="col">Nombre</th>
                <th scope="col">Autor</th>
                <th scope="col">Año</th>
                <th scope="col">Editorial</th>
                <th scope="col">Autor</th>
                <th scope="col">Modificar</th>
                <th scope="col">Eliminar</th>
            </tr>
        </thead>
        <tbody>
            {% for libro in libros %}
            <tr>
                <th>{{ libro.id }}</th>
                <td>{{ libro.nombre }}</td>
                <td class="text-truncate" style="max-width: 300px;">{{ libro.descripcion }}</td>
                <td>{{ libro.anio }}</td>
                <td>{{ libro.id_editorial.nombre }}</td>
                <td>{{ libro.id_autor.nombre }}</td>
                <td align="center"><a href="{% url 'modificar_libro' idlibro=libro.id %}" class="btn btn-warning"><i class="fas fa-pencil-alt"></i>
                </a></td>
                <td align="center"><a href="#" onclick="eliminarLibro('{{ libro.id }}')" class="btn btn-danger"><i class="fas fa-trash-alt"></i>
                </a></td>
            </tr>
            {% endfor %}
        </tbody>
        </table>

    </div>
</div>
{% endblock %}